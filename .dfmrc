#!/bin/bash
# Checks for updates once a day.
#===============================================================================

# If you want your dfm to autoupdate, uncomment the next line
#dfm_autoupdate=1

# If you want your dotfiles to autoupdate, uncomment the next line
#dotfiles_autoupdate=1

# Change the following line to reflect how many hours should pass before
# checking for an update
TIMEOUT=24

#
# Try not to change the following lines, but feel free to if you think you've got
# a handle on them.
#

if [ -n "$dfm_autoupdate" ]; then
    DFM_LAST_UPDATE=`cat ~/.dfm/dfm-last-update`;
    DATE=`date +%s`;
    if [[ "$(($DATE - $DFM_LAST_UPDATE))" -gt "$((3600 * $TIMEOUT))" ]]; then
        dfm -n;
    fi;
fi;

if [ -n "$dotfiles_autoupdate" ]; then
    DOTFILES_LAST_UPDATE=`cat ~/.dfm/dotfiles-last-update`;
    DATE=`date +%s`;
    if [[ "$(($DATE - $DOTFILES_LAST_UPDATE))" -gt "$((3600 * $TIMEOUT))" ]]; then
        dfm -u;
    fi;
fi;
